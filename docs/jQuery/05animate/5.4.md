## 5.4 自定义动画

上面几节介绍的动画效果都是元素局部属性发生变化，如高度、宽度、可见性等。在 `jQuery` 中，也允许用户自定义动画效果，通过使用 `animate()`方法，可以制作出效果更优雅、动作更复杂的页面动画效果。



### 5.4.1 简单的动画

`animate()`方法给开发者自定义各种复杂、高级的动画提供了极大的方便和空间，其调用的语法格式为:

```javascript
animate(params,[duration],[easing]，[callback])
```

其中，参数 

- `params`表示用于制作动画效果的属性样式和值的集合。
- 可选项`[duration]`表示三种默认的速度字符“slow”、“normal”、“fast”或自定义的数字。
- 可选项`[easing]`为动画插件使用，用于控制动画的表现效果，通常有“1inear”和“swing”字符值。

- 可选项`[callback]`为动画完成后，执行的回调函数。下面举例说明。

#### 示例 5-8 简单的动画

(1)功能描述
在页面中，单击某块`<div>`元素，其自身的高度与宽度以动画的效果增大。动画完成后元素的边框加粗，并且边框颜色及`<div>`元素内容发生变化。

```javascript
$(function(){
	$(".divFrame").click(function(){  //div元素点击事件				
    $(this).animate({  //宽与高变化的动画效果
        width:"20号",height:"70px"
    },3000,function(){//动画完成后执行的回调函数						
      $(this).css({"border":"solid 3px #666"}).html("变大了!");
    })
  })
})
```

### 5.4.2 移动位置的动画

通过 `animate()`方法，不仅可以用动画效果增加元素的长与宽，还能以动画效果移动页面中的元素，即改变其相对位置。如，将方法中的参数`params`，加入如下代码:

```javascript
$("p").animate({left:"20px",top: "70px"},3000)
```

> 注意：
>
> 说明在动画方法 `animate()`中，第一个参数`params` 在表示动画属性时，需要采用“骆写法，即如果是“`font-size`”，必须写成“`fontSize`”才有效，否则报错。

示例 5-9 移动位置的动画

(1)功能描述
在页面中，创建两个按钮，单击第一个“左移”按钮后，将页面中的`<div>`元索在当前的位置上，以动画的效果向左移动52个像素;单击第二个“右移”按钮后，页面中的`<div>`元素在当前的位置上，以动画的效果向右移动52个像素。

```javascript
$(function(){
	$("input:eq(0)").click(function(){
    	//左移按钮点击事件
    	//在3000毫秒内，以动画的形式向左移动52个像素
    	$(".divList").animate({left:"-=52px"},3000);
	})
    $("input:eq(1)").click(function(){
        //右移按钮点击事件
        //在3000毫秒内，以动画的形式向右移动52个像素						
        $(".divList").animate({left:"+=52px"},3000);
    })
})
```

> <font color="red">注意：</font> 
>
> 要使页面中的元素以动画效果移动，必须首先将该元素的“`position`”属性设置成为“`relative`”或“`absolute`”，否则，无法移动该元素的位置。

### 5.4.3 队列中的动画

所谓“队列”动画，是指在元素中执行一个以上的多个动画效果，即有多个`aniate()`方法在元素中执行，因此，根据这些 `animmate()`方法执行的先后顺序，形成了动画“队列”，产生“队列”后，动画的效果便按“队列”的顺序进行展示。

下面举例说明。

示例 5-10 队列中的动画

(1)功能描述
  在页面中，单击某个固定宽、高的`<div>`标记，首先，以动画的效果，将宽、高在原有基础上加大1倍:然后，再以动画的效果，将宽、高在原有基础上减小1倍。

```javascript
$(function(){
	$("div").click(function(){ //div块单击事件
    	$(this).animate({height:100}，"slow")//第1列
    	.animate({width:100}，"slow")//第2列
    	.animate({height:50}，"slow")//第3列
    	.animate({width:50}，"slow");//第4列
	})
})
```

> 说明 :
>
> 理解动画队列执行的过程后，可以清楚分析各队列中各动画的效果，并可以在指定的某队列中插入其他方法，如队列延时方法 `delay()`。
>
> 该方法的运用将在下节中介绍。

### 5.4.4 动画停止和延时

在`jQuery` 中，通过 `animate()`可以实现元素的动画显示，但在显示的过程中，必然要考虑各种客观因素和限制性条件的存在，因此，在执行动画时，可通过`stop()`方法停止或`delay()`方法延时某个动画的执行。`stop()`与 `delay()`方法的语法调用格式介绍如下`stop()`方法的格式如下:

```javascript
stop([clearQueue]，[gotoEnd])
```

该方法的功能是停止所选元素中正在执行的动画，其中可选参数`[clearOueue]`是一个布尔值，表示是否停止正在执行的动画，另外一个可选参数`[gotoEnd]`也是一个布尔值，表示是否立即完成正在执行的动画。
`delay()`方法的格式如下:

```javascript
delay(duration,[queueName])
```

该方法的功能是设置一个延时值来推迟后续队列中动画的执行，其中参数duration 为延时的时间值，单位是毫秒。可选参数[queueName]表示队列名词，即动画队列。

下面举例说明。

示例 5-11 动画停止和延时

(1)功能描述
在页面中，设置三个超级链接，分别为“开始”、“停止”、“延时”，单击“开始”后，页面中的图片以“拉窗帘”的方式动画切换显示状态:单击“停止”后，立刻停止了正在执行中的动画效果:单击“延时”后，动画切换显示效果在延时 2000 毫秒后，再执行。

```javascript
$(function(){
	$("a:eq(0)").click(function(){//点击"开始"链接事件命				
      $("img").slideToggle(3000);//拉窗帘"方式切换图片
    })
	$("a:eq(1)").click(function(){//点击"停止"链接事件				
    $("img").stop();//停止正在执行的动画
	})
    $("a:eq(2)").click(function(){//点击"延时"链接事件				
      $("img")//延时切换图片
        .delay(2000).slideToggle(3000);
    })
})
```

